language: C++

before_script: 
  - wget https://dl.google.com/android/repository/android-ndk-r20-linux-x86_64.zip
  - unzip -qq android-ndk-r20-linux-x86_64.zip -d /opt
  - rm android-ndk-r20-linux-x86_64.zip
  - ls /
  - ls /opt/android-ndk-r20

script:
  - ./configure.py --without-documentation --os=android --cpu=arm64 --verbose --disable-shared-library --cc-bin=/opt/android-ndk-r20/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++ --extra-cxxflags="-O3 -DNDEBUG -std=c++14 -funwind-tables -no-canonical-prefixes -D__ANDROID_API__=24 -fexceptions -frtti --sysroot=/opt/android-ndk-r20/sysroot -isystem  /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++/include -isystem  /opt/android-ndk-r20/sources/android/support/include -isystem  /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++abi/include -isystem  /opt/android-ndk-r20/sysroot/usr/include -isystem  /opt/android-ndk-r20/sysroot/usr/include/aarch64-linux-android -std=c++14 --target=aarch64-none-linux-android --gcc-toolchain=/opt/android-ndk-r20/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64 -fPIC" --ldflags="-O3 -DNDEBUG -std=c++14   -funwind-tables -no-canonical-prefixes -D__ANDROID_API__=24 -fexceptions -frtti --sysroot=/opt/android-ndk-r20/sysroot -isystem  /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++/include -isystem  /opt/android-ndk-r20/sources/android/support/include -isystem  /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++abi/include -isystem  /opt/android-ndk-r20/sysroot/usr/include -isystem  /opt/android-ndk-r20/sysroot/usr/include/aarch64-linux-android -std=c++14 --target=aarch64-none-linux-android --gcc-toolchain=/opt/android-ndk-r20/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64 -fPIC --sysroot=/opt/android-ndk-r20/platforms/android-24/arch-arm64 -fPIE -pie -Wl,--gc-sections -latomic -lm -ldl -lc -lgcc -L/opt/android-ndk-r20/sources/cxx-stl/llvm-libc++/libs/arm64-v8a /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++_static.a /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++abi.a /opt/android-ndk-r20/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++.a.24"
  - make
  - make install
  